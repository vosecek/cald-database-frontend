webpackJsonp([2],{1266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(63),i=n(96),a=n(304),o=n(1377),l=n(1374),d=n(1376),c=n(1375),u=n(1439);n.d(t,"SeasonsModule",(function(){return m}));var m=(function(){function e(){}return e=__decorate([n.i(r.i)({imports:[s.b,i.a,a.a,u.a],declarations:[l.a,o.a,d.a,c.a]}),__metadata("design:paramtypes",[])],e)})()},1374:function(e,t,n){"use strict";var r=n(0),s=n(33),i=n(26),a=n(306);n.d(t,"a",(function(){return o}));var o=(function(){function e(e,t,n){this.route=e,this.server=t,this.seasonsService=n}return e.prototype.ngOnInit=function(){var e=this;this.route.params.forEach((function(t){var n=+t.year;e.season=e.seasonsService.getSeason(n),e.seasonsService.getTournaments(e.season.id).subscribe((function(t){console.log(t),e.tournaments=[],t.forEach((function(t){var n=e.server.getType("tournamentExtended",t.id);t.league_name=e.server.getType("league",n.league_id,"name"),t.division_name=e.server.getType("division",n.division_id,"name"),t.date=new Date(t.date.split(" ")[0]),e.tournaments.push(t)}))}))}))},e=__decorate([n.i(r._3)({selector:"season-detail",template:n(1475)}),__metadata("design:paramtypes",[s.c,i.a,a.a])],e)})()},1375:function(e,t,n){"use strict";var r=n(0),s=n(33),i=n(26),a=n(607),o=n(608);n.d(t,"a",(function(){return l}));var l=(function(){function e(e,t,n,r,s){this.route=e,this.server=t,this.playerPipe=n,this.teamMarkPipe=r,this.router=s,this.players2roster=[],this.availablePlayers=[],this.teamMark="",this.queryTeam="",this.originPlayers2roster=[]}return e.prototype.loadTeam=function(){var e=this;this.availablePlayers=[],this.server.get("list/player_at_team",{filter:{team_id:this.selectedTeam},extend:!0}).subscribe((function(t){var n=[];t.forEach((function(e){n.push(e.player)})),e.availablePlayers=n}))},e.prototype.add=function(e){this.players2roster.push(e)},e.prototype.remove=function(e){var t=this.players2roster.filter((function(t){return t.id==e.id})),n=this.players2roster.indexOf(t[0]);this.players2roster.splice(n,1)},e.prototype.save=function(){var e=this,t=this.players2roster.filter((function(t){return e.originPlayers2roster.indexOf(t)<0})),n=this.originPlayers2roster.filter((function(t){return e.players2roster.indexOf(t)<0}));t.forEach((function(t){e.server.post(["roster",e.id,"player",t.id].join("/")).subscribe((function(e){console.log(e)}))})),n.forEach((function(t){e.server.delete(["roster",e.id,"player",t.id].join("/")).subscribe((function(e){console.log(e)}))}))},e.prototype.delete=function(){var e=this;confirm("Opravdu smazat soupisku týmu "+this.teamMark+"?")&&this.server.delete("roster/"+this.id).subscribe((function(t){e.router.navigateByUrl(e.tournamentUrl())}))},e.prototype.tournamentUrl=function(){var e=this.router.url.split("/");return e.pop(),e.join("/")},e.prototype.ngOnInit=function(){var e=this;this.teams=this.server.getType("team"),this.route.params.forEach((function(t){e.id=t.roster}));var t=this.server.getTeam2Edit();this.selectedTeam=t[0],this.loadTeam(),this.id&&this.server.get("list/roster",{extend:!0,filter:{id:this.id}}).subscribe((function(t){console.log(t),0==t.length&&e.router.navigateByUrl(e.tournamentUrl()),e.roster=t[0],e.server.get("list/roster",{filter:{tournament_belongs_to_league_and_division_id:e.roster.tournament_belongs_to_league_and_division.id}}).subscribe((function(t){var n=t.filter((function(t){return t.team_id==e.roster.team.id})),r=0;n.forEach((function(t){t.id==e.roster.id&&(e.teamMark=e.roster.team.name+" "+e.teamMarkPipe.transform(r)),r++}))})),e.server.get("list/player_at_roster",{filter:{roster_id:e.roster.id},extend:!0}).subscribe((function(t){var n=[];t.forEach((function(e){n.push(e.player)})),e.players2roster=n,e.originPlayers2roster=e.players2roster.slice()}))}))},e=__decorate([n.i(r._3)({selector:"roster",styles:[n(1470)],providers:[a.a],template:n(1476)}),__metadata("design:paramtypes",[s.c,i.a,a.a,o.a,s.b])],e)})()},1376:function(e,t,n){"use strict";var r=n(0),s=n(1443),i=n(33),a=n(96),o=n(26),l=n(1444),d=n(607);n.d(t,"a",(function(){return c}));var c=(function(){function e(e,t,n,r,i){this.route=e,this.router=t,this.formBuilder=n,this.server=r,this.playerPipe=i,this.season=new s.a,this.tournament=new l.a}return e.prototype.roster=function(e,t){var n=this;t?this.server.post("roster",{team_id:t,tournament_belongs_to_league_and_division_id:e.id}).subscribe((function(e){console.log(e),n.ngOnInit()})):this.router.navigateByUrl([this.router.url,e.id].join("/"))},e.prototype.ngOnInit=function(){var e=this;this.route.params.forEach((function(t){var n=+t.tournament;e.server.get("list/tournament",{filter:{id:n},extend:!0}).subscribe((function(t){t[0].date=new Date(t[0].date.split(" ")[0]),e.tournament=t[0],e.season=e.tournament.season,e.divisions=e.server.getTournaments2league(e.tournament.id),e.colClass="col-xl-12",1==e.divisions.length&&(e.colClass="col-xl-12"),2==e.divisions.length&&(e.colClass="col-xl-6"),3==e.divisions.length&&(e.colClass="col-xl-4"),e.rights=e.server.getTeam2Edit(),e.divisions.forEach((function(t){t.userRosters=[],e.server.get("list/roster",{filter:{tournament_belongs_to_league_and_division_id:t.id}}).subscribe((function(n){t.rosters=n,t.rosters.forEach((function(n){e.rights.indexOf(n.team_id)>-1&&(t.userRosters[n.team_id]||(t.userRosters[n.team_id]=[]),t.userRosters[n.team_id].push(n)),n.hide=!0,n.name=e.server.getType("team",n.team_id,"name"),e.server.get("list/player_at_roster",{filter:{roster_id:n.id}}).subscribe((function(t){n.players=t,n.players.forEach((function(t){t.name=e.playerPipe.transform(t.player_id)}))}))}))}))}))}))}))},e=__decorate([n.i(r._3)({selector:"tournament",styles:[],providers:[d.a],template:n(1477)}),__metadata("design:paramtypes",[i.c,i.b,a.e,o.a,d.a])],e)})()},1377:function(e,t,n){"use strict";var r=n(0),s=n(33),i=n(26),a=n(306);n.d(t,"a",(function(){return o}));var o=(function(){function e(e,t,n){this.server=e,this.router=t,this.seasonsService=n,this.seasons=[]}return e.prototype.getTournaments=function(e){return this.server.get("list/tournament",{filter:{season_id:e},extend:!0}).map((function(e){return e}))},e.prototype.ngOnInit=function(){this.seasons=this.server.getType("season")},e=__decorate([n.i(r._3)({selector:"seasons-component",styles:["seasons.scss"],template:n(1478)}),__metadata("design:paramtypes",[i.a,s.b,a.a])],e)})()},1439:function(e,t,n){"use strict";var r=n(33),s=n(1377),i=n(1374),a=n(1376),o=n(1375);n.d(t,"a",(function(){return d}));var l=[{path:"",component:s.a},{path:":year",component:i.a},{path:":year/:tournament",component:a.a},{path:":year/:tournament/:roster",component:o.a}],d=r.a.forChild(l)},1443:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=(function(){function e(){}return e})()},1444:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=(function(){function e(){}return e})()},1470:function(e,t){e.exports=".roster button{min-width:150px;margin:.2em;text-align:left}.roster button i{float:left;display:inline-block}\n"},1475:function(e,t){e.exports='<div class="row">\n    <div class="col-xl-12">\n        <ba-card title="{{season.name}}" baCardClass="with-scroll" *ngIf=\'tournaments\'>\n            <ul>\n                <li *ngFor="let tournament of tournaments">\n                    <a [routerLink]="[\'/app/seasons\',season.name, tournament.id]">{{tournament.name}}</a>\n                    <br />\n                    <small>{{tournament.date|date}}, {{tournament.league_name}}, {{tournament.division_name}}</small>\n                </li>\n            </ul>\n        </ba-card>\n    </div>\n</div>\n'},1476:function(e,t){e.exports="<div class=\"row\">\n    <div class='col-xl-6'>\n        <ba-card title=\"{{teamMark}} - soupiska\" baCardClass=\"with-scroll\">\n            <div class='col-xl-6'>\n                <h4>Muži</h4>\n                <div *ngFor='let player of players2roster|order:[\"last_name\"]|sex:\"male\"' class='roster'>\n                    <button (click)='remove(player)' class='btn btn-default btn-with-icon btn-xs'><i class='ion-trash-a'></i> {{player.id|player}} </button>\n                </div>\n            </div>\n            <div class='col-xl-6'>\n                <h4>Ženy</h4>\n                <div *ngFor='let player of players2roster|order:[\"last_name\"]|sex:\"female\"' class='roster'>\n                    <button (click)='remove(player)' class='btn btn-default btn-with-icon btn-xs'><i class='ion-trash-a'></i> {{player.id|player}} </button>\n                </div>\n            </div>\n            <div class='col-xl-12'>\n                <div *ngIf='players2roster.length == 0'>Klik na jméno hráče v pravém sloupci přidá hráče do soupisky</div>\n                <hr />\n                <button class='btn btn-danger btn-raised fl' (click)='delete()'>Smazat tým z turnaje</button>\n                <button class='btn btn-success btn-raised fr' (click)='save()'>Uložit soupisku</button>\n            </div>\n        </ba-card>\n    </div>\n    <div class='col-xl-6'>\n        <ba-card title=\"Dostupní hráči\" baCardClass=\"with-scroll\">\n            <div class='row'>\n                <div class='col-xl-6'>\n                    <div class=\"form-group\">\n                        <label for=\"selectedTeam\">Hráči týmu</label>\n                        <select id='selectedTeam' class='form-control' (change)=\"loadTeam()\" [(ngModel)]='selectedTeam'>\n                            <option *ngFor='let team of teams|order:[\"name\"]' value='{{team.id}}'>{{team.name}}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class='col-xl-6'>\n                    <div class=\"form-group\">\n                        <label for=\"filterTeam\">Hledat v týmu</label>\n                        <input id='filterTeam' class='form-control' [(ngModel)]='queryTeam' placeholder=\"jméno (alespoň 3 znaky)\" />\n                    </div>\n                </div>\n            </div>\n            <hr />\n            <div class='col-xl-6'>\n                <h4>Muži</h4>\n                <div *ngIf='(availablePlayers|filterPlayers:queryTeam|order:[\"last_name\"]|sex:\"male\"|intersect:players2roster).length == 0'>žádní hráči</div>\n                <div *ngFor='let player of availablePlayers|filterPlayers:queryTeam|order:[\"last_name\"]|sex:\"male\"|intersect:players2roster' class='roster'>\n                    <button (click)='add(player)' class='btn btn-default btn-with-icon btn-xs'><i class='ion-plus-circled'></i> {{player.id|player}} </button>\n                </div>\n            </div>\n            <div class='col-xl-6'>\n                <h4>Ženy</h4>\n                <div *ngIf='(availablePlayers|filterPlayers:queryTeam|order:[\"last_name\"]|sex:\"female\"|intersect:players2roster).length == 0'>žádní hráči</div>\n                <div *ngFor='let player of availablePlayers|filterPlayers:queryTeam|order:[\"last_name\"]|sex:\"female\"|intersect:players2roster' class='roster'>\n                    <button (click)='add(player)' class='btn btn-default btn-with-icon btn-xs'><i class='ion-plus-circled'></i> {{player.id|player}} </button>\n                </div>\n            </div>\n        </ba-card>\n    </div>\n</div>\n"},1477:function(e,t){e.exports="<div class=\"row\">\n    <div class='col-xl-12'>\n        <ba-card title=\"{{tournament.name}}\" baCardClass=\"with-scroll\">\n            <p>Místo konání: {{tournament.location}}</p>\n            <p>Datum: {{tournament.date|date}}</p>\n        </ba-card>\n    </div>\n</div>\n<div class=\"row\">\n    <div [ngClass]='colClass' *ngFor='let division of divisions'>\n        <div *ngIf='division.rosters'>\n            <ba-card title=\"{{division.division_id|division}} ({{division.rosters.length}})\" baCardClass=\"with-scroll\">\n                <div *ngIf='division.userRosters.length>0'>\n                    <h4>Moje týmy</h4>\n                    <div *ngFor='let team of division.userRosters' style='display: inline;'>\n                        <div *ngFor='let r of team;let i = index;' style='display: inline;'>\n                            <button (click)=\"roster(r)\" class=\"btn btn-info btn-with-icon\"><i class=\"ion-edit\"></i>{{r.team_id|team}} {{i|teammark}}</button>\n                        </div>\n                    </div>\n                    <div style='margin-top: .5em;'>\n                        <div *ngFor='let team of rights' style='display: inline;'>\n                            <button (click)=\"roster(division,team)\" class=\"btn btn-success btn-with-icon\"><i class=\"ion-plus\"></i>Přidat tým {{team|team}}</button>\n                        </div>\n                    </div>\n                </div>\n                <br />\n                <h4>Přihlášené týmy</h4>\n                <ul>\n                    <li *ngFor=\"let roster of division.rosters|order:['name']\">\n                        <a style=\"cursor:pointer;\" (click)=\"roster.hide = !roster.hide\">{{roster.name}}</a> <span *ngIf='roster.players'>({{roster.players.length}})</span>\n                        <ul [hidden]='roster.hide'>\n                            <li *ngFor=\"let player of roster.players|order:['name']\">{{player.name}}</li>\n                        </ul>\n                    </li>\n                </ul>\n            </ba-card>\n        </div>\n    </div>\n</div>\n<!-- |player:id -->\n"},1478:function(e,t){e.exports='<div class="row">\n    <div class="col-xl-12">\n        <ba-card title="Sezony" baCardClass="with-scroll" *ngIf=\'seasons\'>\n            <ul *ngIf=\'!season\'>\n                <li *ngFor="let season of seasons|order:[\'-name\']">\n                    <a [routerLink]="[\'/app/seasons\',season.name]">{{season.name}}</a>\n                </li>\n            </ul>\n        </ba-card>\n    </div>\n</div>\n'}});